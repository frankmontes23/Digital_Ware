CREATE TABLE CLIENTES (
    CLIENTE         VARCHAR(20) NOT NULL,
    NOMBRE_CLIENTE  VARCHAR(100),
    DIRECCION       VARCHAR(100)
);
ALTER TABLE CLIENTES ADD CONSTRAINT PK_CLIENTES PRIMARY KEY (CLIENTE);


CREATE TABLE PRODUCTOS (
    PRODUCTO         VARCHAR(10) NOT NULL,
    NOMBRE_PRODUCTO  VARCHAR(100),
    VALOR            NUMERIC(15,2)
);
ALTER TABLE PRODUCTOS ADD CONSTRAINT PK_PRODUCTOS PRIMARY KEY (PRODUCTO);


CREATE TABLE CABEZA_FACTURA (
    NUMERO   INTEGER NOT NULL,
    FECHA    DATE,
    CLIENTE  VARCHAR(20) NOT NULL,
    TOTAL    NUMERIC(15,2)
);

ALTER TABLE CABEZA_FACTURA ADD CONSTRAINT PK_CABEZA_FACTURA PRIMARY KEY (NUMERO, CLIENTE);
ALTER TABLE CABEZA_FACTURA ADD CONSTRAINT FK_CABEZA_FACTURA_1 FOREIGN KEY (CLIENTE) REFERENCES CLIENTES (CLIENTE);

CREATE TABLE DETALLE_FACTURA (
    NUMERO    INTEGER NOT NULL,
    PRODUCTO  VARCHAR(10) NOT NULL,
    CANTIDAD  NUMERIC(15,2),
    VALOR     NUMERIC(15,2)
);
ALTER TABLE DETALLE_FACTURA ADD CONSTRAINT PK_DETALLE_FACTURA PRIMARY KEY (NUMERO, PRODUCTO);
ALTER TABLE DETALLE_FACTURA ADD CONSTRAINT FK_DETALLE_FACTURA_2 FOREIGN KEY (PRODUCTO) REFERENCES PRODUCTOS (PRODUCTO);


CREATE SEQUENCE NFACTURA;
ALTER SEQUENCE NFACTURA RESTART WITH 0;

